<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/templates/templateP.xhtml">
	<ui:define name="conteudo">
	<link rel="stylesheet" type="text/css" href="${request.contextPath}/bootsrap/css/listagem.css" />
	    
    <p:dialog id="modalMapa" widgetVar="modaSelecionaMapa" closeOnEscape="false" position="center" modal="true"
    	closable="false" header="#{strings.selecionarAreaBusca}" resizable="false" width="600" height="450">
    	<ui:decorate template="/templates/select_mapa.xhtml">
    		<ui:param name="mapa" value="#{listagemCompleta}"/>
    	</ui:decorate>
    </p:dialog>
	
	<h:form id="formulario" prependId="false">
		
		<p:dialog id="modalItem" widgetVar="modalViewItem" modal="true" closeOnEscape="true" width="500" height="350" position="center" resizable="false" 
			header="#{listagemCompleta.selecionadoParaModal.tituloPrincipal} : #{listagemCompleta.selecionadoParaModal.numeroRegistro}">
			<ui:decorate template="/templates/modal_item_do_acervo.xhtml">
				<ui:param name="modal" value="#{listagemCompleta}"/>
			</ui:decorate>
	    </p:dialog>
	    
	    <p:dialog id="modalTipo" widgetVar="modalSelecionaTipoAcervo" closeOnEscape="false" position="center" width="400" height="150" modal="true"
	    	header="#{strings.selecionarTipoAcervo}" closable="false" resizable="false">
	    	<h:selectOneRadio value="#{listagemCompleta.tipoAcervo}" layout="pageDirection">
	    		<f:selectItem itemValue="todoAcervo" itemLabel="#{strings.todoAcervo}"/>
	    		<f:selectItem itemValue="flora" itemLabel="#{strings.flora}"/>
	    		<f:selectItem itemValue="fauna" itemLabel="#{strings.fauna}"/>	    	
	    	</h:selectOneRadio>
	    	<h:commandButton value="Selecionar" onclick="PF('modalSelecionaTipoAcervo').close();"
	    		styleClass="btn btn-primary btn-small" style="right:5px ; bottom: 5px; position: absolute;">
	    		<f:ajax render="modalTipo"/>
	    	</h:commandButton>
	    </p:dialog>
	    
		<div class="container">
			<div class="col-10 col-sm-12 col-xs-12 col-md-12 col-lg-10 centralizado">
				<div class="row">
					<div class="row" style="margin-bottom: 20px !important;">
						<h:outputText value="#{listagemCompleta.page.title}" styleClass="h2 centralizado centralizado-texto"/>
						<h:outputText value="#{listagemCompleta.page.content}" escape="false" />
					</div>
					<div class="input-group" style="margin-bottom: 20px !important;">
						<p:inputText id="palavrasChaves" value="#{listagemCompleta.stringBusca}" styleClass="form-control input-sm" placeholder="#{strings.palavrasChaves}" style="width: 250px;"/>			
						<p:commandButton value="#{strings.buscar}" styleClass="btn btn-success btn-sm" actionListener="#{listagemCompleta.novaBusca(listagemCompleta.stringBusca)}" ajax="false"/>
						<p:commandButton value="#{listagemCompleta.getNomeLocal(listagemCompleta.tipoAcervo)}" styleClass="btn btn-primary btn-sm" onclick="PF('modalSelecionaTipoAcervo').show();"/>
						<p:commandButton value="#{listagemCompleta.getNomeLocal(listagemCompleta.localMapa)}" styleClass="btn btn-primary btn-sm" onclick="PF('modaSelecionaMapa').show();"/>
					</div>
					<div class="centralizado row">
						<p:dataTable value="#{listagemCompleta.itens}" var="item" binding="#{listagemCompleta.tabelaItens}">
							<p:column headerText="#{strings.nomePopular}" width="250" sortBy="#{item.tituloPrincipal}">
								<p:commandLink actionListener="#{listagemCompleta.selecionaItemParaModal}" oncomplete="PF('modalViewItem').show(); setLinksGalleria();" update=":formulario:modalItem">
									<h:outputText value="#{item.tituloPrincipal}"/>
								</p:commandLink>
							</p:column>
							<p:column headerText="#{strings.nomeCientifico}"  sortBy="#{item.complemento}">
								<p:commandLink actionListener="#{listagemCompleta.selecionaItemParaModal}" oncomplete="PF('modalViewItem').show(); setLinksGalleria();" update=":formulario:modalItem">
									<h:outputText value="#{item.complemento}"/>
								</p:commandLink>
							</p:column>
							<p:column headerText="#{strings.identificacaoNoMuseu}" width="225"  sortBy="#{item.numeroRegistro}">
								<p:commandLink actionListener="#{listagemCompleta.selecionaItemParaModal}" oncomplete="PF('modalViewItem').show(); setLinksGalleria();" update=":formulario:modalItem">
									<h:outputText value="#{item.numeroRegistro}"/>
								</p:commandLink>
							</p:column>	
						</p:dataTable>
					</div>
				</div>
				<div class="row">
					<h:commandButton id="anterior" value="voltar" actionListener="#{listagemCompleta.pagAnterior}" disabled="#{listagemCompleta.pagina == 1}" 
						onclick="desabilitarBotoes();" styleClass="btn btn-primary btn-sm" style="width: 200px;">
						<f:ajax render="formulario" />
					</h:commandButton>
					<h:commandButton id="mais" value="mais" actionListener="#{listagemCompleta.proxPagina}" disabled="#{listagemCompleta.ultimaPagina}" 
						onclick="desabilitarBotoes();" styleClass="btn btn-primary btn-sm" style="float:right; width: 200px;">
						<f:ajax render="formulario"/>
					</h:commandButton>
				</div>
			</div>
		</div>
		<script>
		function desabilitarBotoes(){
			var botao = document.getElementById("anterior");
			botao.setAttribute("disabled", "true");
			botao = document.getElementById("mais");
			botao.setAttribute("disabled", "true");
		}
		</script>
	</h:form>
	</ui:define>
	</ui:composition>
</html>